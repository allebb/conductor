#!/usr/bin/env bash

# Load some configuration and 'common' code in...
BINDIR=/etc/conductor/bin
source /etc/conductor.conf
source $BINDIR/_headers

# Application specific...
NOW=$(date +"%Y-%m-%d-%H%M")
ARCHIVE_FILE="${APPNAME}_$NOW.tar.gz"
if [ -d "$APPDIRECTORY" ]; then
	echo "Starting application backup..."
	backupApplication $ARCHIVE_FILE
	echo "...finished!"
	echo
	echo "Backup successfully created: $BACKUP_DIR/$ARCHIVE_FILE"
	echo ""
	exit 0
else
	echo "Application does not exist!"
	exit 1
fi
